Zero Touch Provisioning
===========

Zero touch provisioning (ZTP) allows you to provision new Juniper Networks switches and routers in your network automatically, without manual intervention. When you physically connect a switch or router to the network and boot it with a default factory configuration, it attempts to upgrade the Junos OS software automatically and autoinstall a configuration file from the network.

This project aims to automate the process of zero touch provisioning. To check if your device supports ZTP, refer [Juniper Feature Explorer](https://apps.juniper.net/feature-explorer/).

Directory Sturcture:
-----

* **saim_ztp.py** : Deletes existing dhcpd.conf, generates new dhcpd.conf, generates new configuration files.

* **zeroize.py** : Zeroises Juniper devices listed in the csv file.

* **saim_device_data.csv** : csv file containing network device information.

* **saim_isc-dhcpd_template.j2** : Jinja2 template for generating dhcpd.conf

* **saim_junos_conf_template.j2** : Jinja2 template for generating juniper device configuration

* ***base_dhcp*** : The folder contains the base dhcpd.conf file to which device specific data will be appended by saim_ztp.py

* ***config_files*** : The folder contains sample configuration files generated by saim_ztp.py

* ***support_files*** : The folder contains additional configuration files which are required to be configured before running the scripts.


Work Flow
-----

1) Install dhcp and apache2 server packages
```sh
sudo apt-get install isc-dhcp-server
sudo apt-get install apache2

```

2) Edit the connected dhcp interface in the /etc/default/isc-dhcp-server file. Change the variable INTERFACES in isc-dhcp-server file. Refer support_files folder.

3) Restart dhcp and apache services and check status

```sh
systemctl restart apache2
systemctl restart isc-dhcp-server
systemctl status apache2
systemctl status isc-dhcp-server
```

4) Run the script saim_ztp.py followed by zeroize.py


Usage
-----
```sh
./saim_ztp.py

./zeroize.py
```

Troubleshooting
-----
Monitor the following logs for troubleshooting
* /var/log/apache2/access.log in the ubuntu server
* /var/log/messages in the Junos device
